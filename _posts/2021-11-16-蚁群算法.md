---
layout: post
title:  "èšç¾¤ç®—æ³•"
date:   2021-11-16 15:38:20 +0800
tags:
      - example7
---

# é€šè¿‡èšç¾¤ç®—æ³•æ±‚è§£TSPé—®é¢˜



## å®éªŒå†…å®¹

**é€šè¿‡èšç¾¤ç®—æ³•æ±‚è§£TSPé—®é¢˜**ã€‚



## å®éªŒåŸç†

### èšç¾¤ç®—æ³•

#### å®šä¹‰

â€‹		èšç¾¤ç³»ç»Ÿ(Ant System(AS)æˆ–Ant Colony System(ACS))æ˜¯ç”±æ„å¤§åˆ©å­¦è€…Dorigoã€Maniezzoç­‰äººäº20ä¸–çºª90å¹´ä»£é¦–å…ˆæå‡ºæ¥çš„ã€‚ä»–ä»¬åœ¨ç ”ç©¶èš‚èšè§…é£Ÿçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°èšç¾¤æ•´ä½“ä¼šä½“ç°ä¸€äº›æ™ºèƒ½çš„è¡Œä¸ºï¼Œä¾‹å¦‚èšç¾¤å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ï¼Œå¯»æ‰¾æœ€çŸ­åˆ°è¾¾é£Ÿç‰©æºçš„è·¯å¾„ã€‚ åç»è¿›ä¸€æ­¥ç ”ç©¶å‘ç°ï¼Œè¿™æ˜¯å› ä¸ºèš‚èšä¼šåœ¨å…¶ç»è¿‡çš„è·¯å¾„ä¸Šé‡Šæ”¾ä¸€ç§å¯ä»¥ç§°ä¸ºâ€œä¿¡æ¯ç´ (pheromone)â€çš„ç‰©è´¨ï¼Œèšç¾¤å†…çš„èš‚èšå¯¹â€œä¿¡æ¯ç´ â€å…·æœ‰æ„ŸçŸ¥èƒ½åŠ›ï¼Œå®ƒä»¬ä¼šæ²¿ç€â€œä¿¡æ¯ç´ â€æµ“åº¦è¾ƒé«˜è·¯å¾„è¡Œèµ°ï¼Œè€Œæ¯åªè·¯è¿‡çš„èš‚èšéƒ½ä¼šåœ¨è·¯ä¸Šç•™ä¸‹â€œä¿¡æ¯ç´ â€ï¼Œè¿™å°±å½¢æˆä¸€ç§ç±»ä¼¼æ­£åé¦ˆçš„æœºåˆ¶ï¼Œè¿™æ ·ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œæ•´ä¸ªèšç¾¤å°±ä¼šæ²¿ç€æœ€çŸ­è·¯å¾„åˆ°è¾¾é£Ÿç‰©æºäº†ã€‚

â€‹		ç”±ä¸Šè¿°èš‚èšæ‰¾é£Ÿç‰©æ¨¡å¼æ¼”å˜æ¥çš„ç®—æ³•ï¼Œå³æ˜¯èšç¾¤ç®—æ³•ã€‚è¿™ç§ç®—æ³•å…·æœ‰åˆ†å¸ƒè®¡ç®—ã€ä¿¡æ¯æ­£åé¦ˆå’Œå¯å‘å¼æœç´¢çš„ç‰¹å¾ï¼Œæœ¬è´¨ä¸Šæ˜¯è¿›åŒ–ç®—æ³•ä¸­çš„ä¸€ç§å¯å‘å¼å…¨å±€ä¼˜åŒ–ç®—æ³•ã€‚ æœ€è¿‘å‡ å¹´ï¼Œè¯¥ç®—æ³•åœ¨ç½‘ç»œè·¯ç”±ä¸­çš„åº”ç”¨å—åˆ°è¶Šæ¥è¶Šå¤šå­¦è€…çš„å…³æ³¨ï¼Œå¹¶æå‡ºäº†ä¸€äº›æ–°çš„åŸºäºèš‚èšç®—æ³•çš„è·¯ç”±ç®—æ³•ã€‚åŒä¼ ç»Ÿçš„è·¯ç”±ç®—æ³•ç›¸æ¯”è¾ƒï¼Œè¯¥ç®—æ³•åœ¨ç½‘ç»œè·¯ç”±ä¸­å…·æœ‰ä¿¡æ¯åˆ†å¸ƒå¼æ€§ã€åŠ¨æ€æ€§ã€éšæœºæ€§å’Œå¼‚æ­¥æ€§ç­‰ç‰¹ç‚¹ï¼Œè€Œè¿™äº›ç‰¹ç‚¹æ­£å¥½èƒ½æ»¡è¶³ç½‘ç»œè·¯ç”±çš„éœ€è¦ã€‚

**äººå·¥èšç¾¤ä¸çœŸå®èšç¾¤ç›¸æ¯”**

| ç›¸åŒç‚¹                                          | ä¸åŒç‚¹                              |
| ----------------------------------------------- | ----------------------------------- |
| 1. éƒ½å­˜åœ¨ä¸ªä½“ç›¸äº’äº¤æµçš„é€šä¿¡æœºåˆ¶                 | 1. äººå·¥èš‚èšå…·æœ‰è®°å¿†èƒ½åŠ›             |
| 2. éƒ½è¦å®Œæˆå¯»æ‰¾æœ€çŸ­è·¯å¾„çš„ä»»åŠ¡                   | 2. äººå·¥èš‚èšé€‰æ‹©è·¯å¾„æ—¶ä¸æ˜¯å®Œå…¨ç›²ç›®çš„ |
| 3. éƒ½é‡‡ç”¨æ ¹æ®å½“å‰ä¿¡æ¯è¿›è¡Œè·¯å¾„é€‰æ‹©çš„éšæœºé€‰æ‹©ç­–ç•¥ | 3. äººå·¥èš‚èšç”Ÿæ´»åœ¨ç¦»æ•£æ—¶é—´çš„ç¯å¢ƒä¸­   |



#### åŸºæœ¬åŸç†

1. èš‚èšåœ¨è·¯å¾„ä¸Šé‡Šæ”¾ä¿¡æ¯ç´ ã€‚

2. ç¢°åˆ°è¿˜æ²¡èµ°è¿‡çš„è·¯å£ï¼Œå°±éšæœºæŒ‘é€‰ä¸€æ¡è·¯èµ°ã€‚åŒæ—¶ï¼Œé‡Šæ”¾ä¸è·¯å¾„é•¿åº¦æœ‰å…³çš„ä¿¡æ¯ç´ ã€‚

3. ä¿¡æ¯ç´ æµ“åº¦ä¸è·¯å¾„é•¿åº¦æˆåæ¯”ã€‚åæ¥çš„èš‚èšå†æ¬¡ç¢°åˆ°è¯¥è·¯å£æ—¶ï¼Œå°±é€‰æ‹©ä¿¡æ¯ç´ æµ“åº¦è¾ƒé«˜è·¯å¾„ã€‚

4. æœ€ä¼˜è·¯å¾„ä¸Šçš„ä¿¡æ¯ç´ æµ“åº¦è¶Šæ¥è¶Šå¤§ã€‚

5. æœ€ç»ˆèšç¾¤æ‰¾åˆ°æœ€ä¼˜å¯»é£Ÿè·¯å¾„ã€‚



#### ä¿¡æ¯ç´ æ›´æ–°æ¨¡å‹

**èšå‘¨æ¨¡å‹**

å•åªèš‚èšæ‰€è®¿é—®è·¯å¾„ä¸Šçš„ä¿¡æ¯ç´ æµ“åº¦æ›´æ–°è§„åˆ™ä¸ºï¼š

â€‹		$Î”ğœ_ğ‘˜{(i, j)} = Q/L_K$ è‹¥ç¬¬ K åªèš‚èšåœ¨æœ¬æ¬¡å¾ªç¯ä¸­ä» X åˆ° Yï¼Œ

â€‹		å¦åˆ™ï¼Œ$Î”ğœ_ğ‘˜{(i, j)} = 0$ã€‚

â€‹		å…¶ä¸­ï¼š$ğœ{(i, j)}$ ä¸ºå½“å‰è·¯å¾„ä¸Šçš„ä¿¡æ¯ç´ ã€‚

â€‹					$Î”ğœ_ğ‘˜{(i, j)}$ ä¸ºç¬¬kåªèš‚èšç•™åœ¨è·¯å¾„ï¼ˆx, yï¼‰ä¸Šçš„ä¿¡æ¯ç´ çš„å¢é‡ã€‚

â€‹					$Q$ ä¸ºå¸¸æ•° Lk ä¸ºä¼˜åŒ–é—®é¢˜çš„ç›®æ ‡å‡½æ•°å€¼ã€‚

â€‹					$L_k$ è¡¨ç¤ºç¬¬kåªèš‚èšåœ¨æœ¬æ¬¡å¾ªç¯ ä¸­æ‰€èµ°è·¯å¾„çš„é•¿åº¦,æ˜¯ $R_k$ ä¸­æ‰€æœ‰è¾¹çš„é•¿åº¦å’Œã€‚



**èšé‡æ¨¡å‹**

â€‹		$Î”ğœ_ğ‘˜{(i, j)} = Q/d_{xy}$ è‹¥ç¬¬ K åªèš‚èšåœ¨æœ¬æ¬¡å¾ªç¯ä¸­ä» X åˆ° Yï¼Œ

â€‹		å¦åˆ™ï¼Œ$Î”ğœ_ğ‘˜{(i, j)} = 0$ã€‚

â€‹		å…¶ä¸­ï¼Œ $d_{xy}$ è¡¨ç¤ºå…ƒç´ ï¼ˆåŸå¸‚ï¼‰ã€‚

**èšå¯†æ¨¡å‹**

â€‹		$Î”ğœ_ğ‘˜{(i, j)} = 0$ è‹¥ç¬¬ K åªèš‚èšåœ¨æœ¬æ¬¡å¾ªç¯ä¸­ä» X åˆ° Yï¼Œ

â€‹		å¦åˆ™ï¼Œ$Î”ğœ_ğ‘˜{(i, j)} = 0$ã€‚



**ä¸åŒæ¨¡å‹ä¹‹é—´çš„æ¯”è¾ƒ**

|          | ä¿¡æ¯ç´ å¢é‡ä¸åŒ                                               | ä¿¡æ¯ç´ æ›´æ–°æ—¶åˆ»ä¸åŒ                                           | ä¿¡æ¯ç´ æ›´æ–°å½¢å¼ä¸åŒ                                           |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| èšå‘¨æ¨¡å‹ | ä¿¡æ¯ç´ å¢é‡ä¸º $Q / L_k$ , å®ƒåªä¸æœç´¢è·¯çº¿æœ‰å…³ï¼Œä¸å…·ä½“çš„è·¯å¾„ $(i, j)$ æ— å…³ | åœ¨ç¬¬ $k$ åªèš‚èšå®Œæˆä¸€æ¬¡è·¯å¾„æœç´¢åï¼Œå¯¹çº¿è·¯ä¸Šæ‰€æœ‰è·¯å¾„è¿›è¡Œiä¿¡æ¯ç´ çš„æ›´æ–° | ä¿¡æ¯ç´ å¢é‡ä¸æœ¬æ¬¡æœç´¢çš„æ•´ä½“è·¯çº¿æœ‰å…³ï¼Œå› æ­¤å±äºå…¨å±€ä¿¡æ¯æ›´æ–°     |
| èšé‡æ¨¡å‹ | ä¿¡æ¯ç´ å¢é‡ä¸º $Q / d_{ij}$ ï¼Œä¸è·¯å¾„ $(i, j)$ çš„é•¿åº¦æœ‰å…³       | åœ¨èšç¾¤å‰è¿›è¿‡ç¨‹ä¸­è¿›è¡Œï¼Œèš‚èšæ¯å®Œæˆä¸€æ­¥ç§»åŠ¨åæ›´æ–°è¯¥è·¯å¾„ä¸Šçš„ä¿¡æ¯ç´ ã€‚ | åˆ©ç”¨èš‚èšæ‰€æœ‰çš„è·¯å¾„ $(i, j)$ ä¸Šçš„ä¿¡æ¯è¿›è¡Œæ›´æ–°ï¼Œå› æ­¤å±äºå±€éƒ¨ä¿¡æ¯æ›´æ–°ã€‚ |
| èšå¯†æ¨¡å‹ | ä¿¡æ¯ç´ å¢é‡ä¸ºå›ºå®šå€¼ $Q$                                       | åœ¨èšç¾¤å‰è¿›è¿‡ç¨‹ä¸­è¿›è¡Œï¼Œèš‚èšæ¯å®Œæˆä¸€æ­¥ç§»åŠ¨åæ›´æ–°è¯¥è·¯å¾„ä¸Šçš„ä¿¡æ¯ç´ ã€‚ | åˆ©ç”¨èš‚èšæ‰€æœ‰çš„è·¯å¾„ $(i, j)$ ä¸Šçš„ä¿¡æ¯è¿›è¡Œæ›´æ–°ï¼Œå› æ­¤å±äºå±€éƒ¨ä¿¡æ¯æ›´æ–°ã€‚ |



#### ä¸»è¦å‚æ•°çš„é€‰æ‹©

|      | å®šä¹‰                                | å‚æ•°å½±å“åˆ†æ                                                 | ç†æƒ³å–å€¼èŒƒå›´  |
| ---- | ----------------------------------- | ------------------------------------------------------------ | ------------- |
| $Î±$  | ä¿¡æ¯å¯å‘å¼å› å­                      | $Î±$ å€¼è¶Šå¤§ï¼Œ èš‚èšé€‰æ‹©ä¹‹å‰èµ°è¿‡çš„è·¯å¾„å¯èƒ½å°±è¶Šå¤§ï¼Œ æœç´¢è·¯å¾„çš„éšæœºæ€§å‡å¼±ï¼Œ $Î±$ è¶Šå°ï¼Œ èšç¾¤æœç´¢èŒƒå›´å°±ä¼šå‡å°‘ï¼Œ å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ | $[0, 5]$      |
| $Î²$  | æœŸæœ›å¯å‘å¼å› å­                      | $Î²$ å€¼è¶Šå¤§ï¼Œèšç¾¤å°±è¶Šå®¹æ˜“é€‰æ‹©å±€éƒ¨è¾ƒçŸ­è·¯å¾„ï¼Œè¿™æ—¶ç®—æ³•çš„æ”¶æ•›é€Ÿåº¦æ˜¯åŠ å¿«äº†ï¼Œ ä½†æ˜¯éšæœºæ€§ç¼ºä¸é«˜ï¼Œ å®¹æ˜“å¾—åˆ°å±€éƒ¨çš„ç›¸å¯¹æœ€ä¼˜ | $[0, 5]$      |
| $m$  | èšç¾¤æ•°é‡                            | $m$ æ•°ç›®è¶Šå¤šï¼Œ å¾—åˆ°çš„æœ€ä¼˜è§£å°±è¶Šç²¾ç¡®ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿä¸å°‘é‡å¤è§£ï¼Œ éšç€ç®—æ³•æ¥è¿‘æœ€ä¼˜å€¼çš„æ”¶æ•›ï¼Œä¿¡æ¯æ­£åé¦ˆçš„ä½œç”¨é™ä½ï¼Œå¤§é‡çš„é‡å¤å·¥ä½œï¼Œæ¶ˆè€—äº†èµ„æºï¼Œå¢åŠ äº†æ—¶é—´å¤æ‚åº¦ | $[10, 10000]$ |
| $Ï$  | ä¿¡æ¯æŒ¥å‘å› å­ï¼Œ $1 - Ï $è¡¨ç¤ºæ®‹ç•™å› å­ | $Ï$ è¿‡å°æ—¶ï¼Œåœ¨å„è·¯å¾„ä¸Šæ®‹ç•™çš„ä¿¡æ¯ç´ è¿‡å¤šï¼Œå¯¼è‡´æ— æ•ˆçš„è·¯å¾„ç»§ç»­æ¯æœç´¢ï¼Œå½±å“åˆ°ç®—æ³•çš„æ”¶æ•›é€Ÿç‡ï¼›$Ï$ è¿‡å¤§ï¼Œæ— æ•ˆçš„è·¯å¾„è™½ç„¶å¯ä»¥è¢«æ’é™¤æœç´¢ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æœ‰æ•ˆçš„è·¯å¾„ä¹Ÿä¼šè¢«æ”¾å¼ƒæœç´¢ï¼Œå½±å“åˆ°æœ€ä¼˜å€¼çš„æœç´¢ | $[0.1, 0.99]$ |





#### å¸¸è§çš„å˜å¼‚èšç¾¤ç®—æ³•

**ç²¾è‹±èš‚èšç³»ç»Ÿ**

â€‹		å…¨å±€æœ€ä¼˜è§£å†³æ–¹æ¡ˆåœ¨æ¯ä¸ªè¿­ä»£ä»¥åŠå…¶ä»–æ‰€æœ‰çš„èš‚èšçš„æ²‰ç§¯ä¿¡æ¯ç´ ã€‚

**æœ€å¤§æœ€å°èš‚èšç³»ç»Ÿï¼ˆMMASï¼‰**

â€‹		æ·»åŠ çš„æœ€å¤§å’Œæœ€å°çš„ä¿¡æ¯ç´ é‡[ Ï„maxï¼ŒÏ„min ]ï¼Œåªæœ‰å…¨å±€æœ€ä½³æˆ–è¿­ä»£æœ€å¥½çš„å·¡é€»æ²‰ç§¯çš„ä¿¡æ¯ç´ ã€‚æ‰€æœ‰çš„è¾¹ç¼˜éƒ½è¢«åˆå§‹åŒ–ä¸ºÏ„maxå¹¶ä¸”å½“æ¥è¿‘åœæ»æ—¶é‡æ–°åˆå§‹åŒ–ä¸ºÏ„maxã€‚

**èšç¾¤ç³»ç»Ÿ**

â€‹		èšç¾¤ç³»ç»Ÿå·²è¢«æå‡ºã€‚

**åŸºäºæ’åºçš„èš‚èšç³»ç»Ÿï¼ˆASrankï¼‰**

â€‹		æ‰€æœ‰è§£å†³æ–¹æ¡ˆéƒ½æ ¹æ®å…¶é•¿åº¦æ’åã€‚ç„¶åä¸ºæ¯ä¸ªè§£å†³æ–¹æ¡ˆè¡¡é‡ä¿¡æ¯ç´ çš„æ²‰ç§¯é‡ï¼Œæœ€çŸ­è·¯å¾„ç›¸æ¯”è¾ƒé•¿è·¯å¾„çš„è§£æ²‰ç§¯äº†æ›´å¤šçš„ä¿¡æ¯ç´ ã€‚

**è¿ç»­æ­£äº¤èšç¾¤ï¼ˆCOACï¼‰**

â€‹		$COAC$ çš„ä¿¡æ¯ç´ æ²‰ç§¯æœºåˆ¶èƒ½ä½¿èš‚èšåä½œè€Œæœ‰æ•ˆåœ°å¯»è§£ã€‚åˆ©ç”¨æ­£äº¤è®¾è®¡æ–¹æ³•ï¼Œåœ¨å¯è¡ŒåŸŸçš„èš‚èšå¯ä»¥ä½¿ç”¨å¢å¤§çš„å…¨å±€æœç´¢èƒ½åŠ›å’Œç²¾åº¦ï¼Œå¿«é€Ÿã€é«˜æ•ˆåœ°æ¢ç´¢ä»–ä»¬é€‰æ‹©çš„åŒºåŸŸã€‚ æ­£äº¤è®¾è®¡æ–¹æ³•å’Œè‡ªé€‚åº”åŠå¾„è°ƒæ•´æ–¹æ³•ä¹Ÿå¯æ¨å¹¿åˆ°å…¶ä»–ä¼˜åŒ–ç®—æ³•ä¸­ï¼Œåœ¨è§£å†³å®é™…é—®é¢˜æ–½å±•æ›´å¤§çš„å¨åŠ›ã€‚



**ä¸åŒèšç¾¤æ¨¡å‹çš„ç³»ç»Ÿç‰¹å¾æ¯”è¾ƒ**

| ç³»ç»Ÿ       | çœŸå®èšç¾¤     | èšç¾¤ä¼˜åŒ–æ¨¡å‹     | ç®€å•é˜ˆå€¼æ¨¡å‹     | ä»¿ç”Ÿåˆ¶é€ æ¨¡å‹       |
| ---------- | ------------ | ---------------- | ---------------- | ------------------ |
| å…ƒç´        | èš‚èšä¸ªä½“è¡Œä¸º | å•ä¸ªäººå·¥èš‚èšæ±‚è§£ | ä¸ªä½“å®Œæˆä»»åŠ¡     | å•å…ƒä½“æ‹¾å–ä¸å †ç§¯   |
| ç»“æ„       | ä¸ªä½“ç›¸äº’å½±å“ | é€šè¿‡è½¨è¿¹é—´æ¥å½±å“ | æ¿€åŠ±ä¸é˜ˆå€¼çš„å…³ç³» | ç©ºé—´å•å…ƒä½“åˆ†å¸ƒæƒ…å†µ |
| ç³»ç»Ÿç¯å¢ƒ   | è‡ªç„¶ç•Œ       | å¾…æ±‚è§£çš„ä¼˜åŒ–é—®é¢˜ | ä»»åŠ¡åˆ†é…é—®é¢˜     | æ•°æ®åˆ†æé—®é¢˜       |
| è¡Œä¸ºå’ŒåŠŸèƒ½ | ç¾¤ä½“è¡Œä¸º     | è‡ªç»„ç»‡ä¼˜åŒ–æ±‚è§£   | è‡ªç»„ç»‡ä»»åŠ¡åˆ†é…   | è‡ªç»„ç»‡æ•°æ®åˆ†æ     |
| ç³»ç»Ÿçš„æ¼”åŒ– | ç”Ÿå­˜ã€ç¹è¡   | æœæœ€ä¼˜è§£æ–¹å‘å‰è¿› | åŠ¨æ€ä»»åŠ¡åˆ†é…     | å®Œæˆæ•°æ®åˆ†æ       |



### æ¨¡æ‹Ÿé€€ç«ç®—æ³•

â€‹		å¯ä»¥é€šè¿‡æ¨¡æ‹Ÿé€€ç«ç®—æ³•æ¥å¯¹æœ€åç»“æœçš„é€‰æ‹©è¿›è¡Œä¼˜åŒ–,å…·ä½“æ“ä½œç•¥ã€‚



## å®éªŒä»£ç 

â€‹	å˜é‡çš„åˆå§‹åŒ–ã€‚

```python
CITY_NUMBERS = 31       #åŸå¸‚æ•°é‡
ANT_NUMBERS = 20        #èš‚èšæ•°é‡
ALPHA = 1               #ä¿¡æ¯ç´ å¯å‘å› å­
BETA = 5                #å¯å‘å‡½æ•°å› å­
RHO = 0.10               #ä¿¡æ¯ç´ æŒ¥å‘é€Ÿåº¦
Q = 10                  #å¸¸æ•°Q
ITERATION_NUMBERS = 75  #è¿­ä»£æ¬¡æ•°
```



â€‹	å»ºç«‹ $Ant$ ç±»ï¼Œ$ID$ ç”¨æ¥å”¯ä¸€æ ‡è¯†æ¯ä¸€ä¸ªå¯¹è±¡ï¼Œ$path$ ç”¨æ¥è®°å½•èš‚èšèµ°è¿‡çš„è·¯å¾„ï¼Œ$distance$ ç”¨æ¥è®°å½•èš‚èšèµ°è¿‡çš„æ€»è·ç¦»ï¼Œ$staying\_place$ è¡¨ç¤ºè¯¥èš‚èšç°åœ¨æ‰€åœ¨çš„åœ°æ–¹ï¼Œ$next\_city$ è¡¨ç¤ºèš‚èšçš„ä¸‹ä¸€ä¸ªç›®çš„åœ°ã€‚

```python
class Ant():
    __slots__ = "ID", "path", "distance","staying_place", "next_city"
```



â€‹	å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œå¹¶æ— æ–°é²œã€‚

```python
  def __init__(self, id):
        self.ID = id
        self.path = []
        self.distance = 0
        self.staying_place = -1
        self.next_city = -1
        pass
```



â€‹	å‡½æ•°ç”¨äºå®Œæˆä¸‹ä¸€ä¸ªè¦èµ°çš„åŸå¸‚çš„é€‰æ‹©ã€‚

```python
    def select_city(self):

        #
        if self.staying_place == -1:##åˆšåˆšå¼€å§‹ï¼
            self.next_city = random.randint(0, CITY_NUMBERS - 1)
            #self.next_city = 0          #å›ºå®šèµ·ç‚¹ï¼Œ æµ‹è¯•æ€§èƒ½å˜åŒ–ï¼ï¼ï¼ï¼ï¼ï¼

            return

        select_city_probability = [0 for i in range(0, CITY_NUMBERS, 1)]
        total_probability = 0

        for i in range(0, CITY_NUMBERS, 1):
            if i not in self.path:
                select_city_probability[i] = pow(arr_pheromone[self.staying_place][i], ALPHA) *\
                                            pow(1 / arr_distance[self.staying_place][i], BETA)
                # æ³¨æ„å¯èƒ½ä¼šå­˜åœ¨æ•°ç»„è¶Šç•Œçš„é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ç”¨ TRY åŒ…è£¹æ¥è§£å†³
                total_probability += select_city_probability[i]

        if total_probability > 0:
            temp_probability = random.uniform(0, total_probability)      #ç”Ÿæˆ 0 - 1 çš„éšæœºæ•°~
            #temp_prob = random.uniform(0.0, total_prob)

            #self.roulette()
            for i in range(0, CITY_NUMBERS, 1):
                if i not in self.path:
                    temp_probability -= select_city_probability[i]
                    if temp_probability < 0:
                        self.next_city = i
                        break                   #æ‰¾åˆ°ç›®æ ‡åŸå¸‚ï¼Œè·³å‡º

        if self.next_city == -1:
            self.next_city = random.randint(0, CITY_NUMBERS - 1)
            while self.next_city in self.path:
                self.next_city = random.randint(0, CITY_NUMBERS - 1)
        #print(self.next_city)

```



â€‹	ç”¨äºè®¡ç®—è¯¥èš‚èšèµ°è¿‡çš„æ€»çš„è·ç¦»ã€‚

```python
    def calculate_pass_distance(self):
        total_distance = 0

        for i in range(1, len(self.path), 1):
            start = self.path[i - 1]
            end = self.path[i]
            total_distance += arr_distance[start][end]

        start = self.path[len(self.path) - 1]
        end = self.path[0]          #å›å®¶äº†å†è®¡ç®—ä¸€æ¬¡å™¢~
        total_distance += arr_distance[start][end]

        self.distance = total_distance

        pass
```



```python
 def is_passed(self, i, j):

        for index in range(1, CITY_NUMBERS, 1):
            start = self.path[i - 1]
            end = self.path[i]

            if i == start and j == end:         #ç»è¿‡ä¸è®ºå…ˆåé¡ºåº~
                return True
            elif i == end and j == start:
                return True

        start = self.path[len(self.path) - 1]
        end = self.path[0]                      #æœ€åä¸€ä¸ªå›è·¯

        if i == start and j == end:             #åŒç†ï¼šç»è¿‡ä¸è®ºå…ˆåé¡ºåº~
            return True
        elif i == end and j == start:
            return True

        return False
```





â€‹	å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```python
# -*-coding:UTF-8 -*-
import random
import sys
#reload(sys)
from scipy.interpolate import make_interp_spline
import numpy as np
import matplotlib.pyplot as plt
from matplotlib import pylab
import matplotlib as mpl
CITY_NUMBERS = 31       #åŸå¸‚æ•°é‡
ANT_NUMBERS = 20        #èš‚èšæ•°é‡
ALPHA = 1               #ä¿¡æ¯ç´ å¯å‘å› å­
BETA = 5                #å¯å‘å‡½æ•°å› å­
RHO = 0.10               #ä¿¡æ¯ç´ æŒ¥å‘é€Ÿåº¦
Q = 10                  #å¸¸æ•°Q
ITERATION_NUMBERS = 75  #è¿­ä»£æ¬¡æ•°

#--------------------------------ANT ç±»------------------------------#
class Ant():
    __slots__ = "ID", "path", "distance","staying_place", "next_city"

    def __init__(self, id):
        self.ID = id
        self.path = []
        self.distance = 0
        self.staying_place = -1
        self.next_city = -1
        pass

    def select_city(self):

        #
        if self.staying_place == -1:##åˆšåˆšå¼€å§‹ï¼
            self.next_city = random.randint(0, CITY_NUMBERS - 1)
            #self.next_city = 0          #å›ºå®šèµ·ç‚¹ï¼Œ æµ‹è¯•æ€§èƒ½å˜åŒ–ï¼ï¼ï¼ï¼ï¼ï¼

            return

        select_city_probability = [0 for i in range(0, CITY_NUMBERS, 1)]
        total_probability = 0

        for i in range(0, CITY_NUMBERS, 1):
            if i not in self.path:
                select_city_probability[i] = pow(arr_pheromone[self.staying_place][i], ALPHA) *\
                                            pow(1 / arr_distance[self.staying_place][i], BETA)
                # æ³¨æ„å¯èƒ½ä¼šå­˜åœ¨æ•°ç»„è¶Šç•Œçš„é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ç”¨ TRY åŒ…è£¹æ¥è§£å†³
                total_probability += select_city_probability[i]

        if total_probability > 0:
            temp_probability = random.uniform(0, total_probability)      #ç”Ÿæˆ 0 - 1 çš„éšæœºæ•°~
            #temp_prob = random.uniform(0.0, total_prob)

            #self.roulette()
            for i in range(0, CITY_NUMBERS, 1):
                if i not in self.path:
                    temp_probability -= select_city_probability[i]
                    if temp_probability < 0:
                        self.next_city = i
                        break                   #æ‰¾åˆ°ç›®æ ‡åŸå¸‚ï¼Œè·³å‡º

        if self.next_city == -1:
            self.next_city = random.randint(0, CITY_NUMBERS - 1)
            while self.next_city in self.path:
                self.next_city = random.randint(0, CITY_NUMBERS - 1)
        #print(self.next_city)

    def calculate_pass_distance(self):
        total_distance = 0

        for i in range(1, len(self.path), 1):
            start = self.path[i - 1]
            end = self.path[i]
            total_distance += arr_distance[start][end]

        start = self.path[len(self.path) - 1]
        end = self.path[0]          #å›å®¶äº†å†è®¡ç®—ä¸€æ¬¡å™¢~
        total_distance += arr_distance[start][end]

        self.distance = total_distance

        pass


    def roulette(self):
        #
        pass

    def is_passed(self, i, j):

        for index in range(1, CITY_NUMBERS, 1):
            start = self.path[i - 1]
            end = self.path[i]

            if i == start and j == end:         #ç»è¿‡ä¸è®ºå…ˆåé¡ºåº~
                return True
            elif i == end and j == start:
                return True

        start = self.path[len(self.path) - 1]
        end = self.path[0]                      #æœ€åä¸€ä¸ªå›è·¯

        if i == start and j == end:             #åŒç†ï¼šç»è¿‡ä¸è®ºå…ˆåé¡ºåº~
            return True
        elif i == end and j == start:
            return True

        return False

    def reset(self):
        #ç»è¿‡äº†ä¸€è½®çš„åŠªåŠ›ï¼Œèš‚èšè¦ä¼‘æ¯äº†
        self.path = []
        self.distance = 0
        self.staying_place = -1
        self.next_city = -1

        return

    def make_move(self):
        if self.next_city != -1:
            self.staying_place = self.next_city
            self.path.append(self.next_city)
            #self.distance +=
            self.next_city = -1

        return

    def do_circle(self):
        for i in range(0, CITY_NUMBERS, 1):
            self.select_city()
            #self.path.append(self.next_city)
            self.make_move()
            #print(self.path)
        self.calculate_pass_distance()
#-----------------------------------------------------------------#


def update_pheromone(arr_ant):
    #
    for i in range(0, CITY_NUMBERS, 1):
        for j in range(0, CITY_NUMBERS, 1):
            if i == j:
                pass
            else:
                temp_pheromone = 0
                for ant in arr_ant:
                    if ant.is_passed(i, j):         #å¦‚æœèš‚èšæœ‰èµ°è¿‡è¿™æ¡è·¯çš„è¯
                        temp_pheromone += 1 / ant.distance

                arr_pheromone[i][j] = (1 - RHO) * arr_pheromone[i][j] + temp_pheromone
                # ä¸è®¡ç®—è·¯å¾„åŒç†ï¼Œ ä¹Ÿä¼šå­˜åœ¨é‡å¤è®¡ç®—çš„é—®é¢˜ï¼Œä½†æš‚ä¸ç†ä¼š
    return

#
# def reset():
#     #
#     pass




def get_optimal_solution():
    #å¯ä»¥è€ƒè™‘ä½¿ç”¨æ¨¡æ‹Ÿé€€ç«æ¥æ±‚æœ€ä¼˜è€Œä¸æ˜¯è®¾ç½®ä¸€ä¸ªè¿­ä»£æ¬¡æ•°
    pass



def calculate_distance():

    for i in range(0, CITY_NUMBERS, 1):
        for j in range(0, CITY_NUMBERS, 1):
            if i == j:
                arr_distance[i][j] = 10000000       #0?
            else:
                arr_distance[i][j] = pow(pow(x[i] - x[j], 2) + pow(y[i] - y[j], 2), 0.5)
                #arr_distance[i][j] = pow(x[i] - x[j], 2) + pow(y[i] - y[j], 2)
                #æš‚æ—¶ä¸è€ƒè™‘å»é™¤é‡å¤è®¡ç®—çš„é—®é¢˜
                #å–æ ¹å·å¯èƒ½æ²¡æœ‰å¿…è¦ï¼Œå…¶å…·ä½“å½±å“å¾…æµ‹è¯•     no!????

    return


def calculate_shortest_length():
    #é€šè¿‡è´ªå¿ƒç®—æ³•æ¥è®¡ç®—æœ€çŸ­è·¯å¾„ä»¥åœ¨ç¨‹åºå¼€å§‹æ—¶å¯¹ä¿¡æ¯ç´ æ•°ç»„è¿›è¡Œåˆå§‹åŒ–
    passed = []
    start = 0
    total_distance = 0
    passed.append(start)
    while True:
        #start = 0
        if len(passed) == CITY_NUMBERS:         #å·²å…¨éƒ¨éå† è¿›è¡Œä¸€ä¸ªè·³çš„å‡º
            break
        temp_distance = 1000000
        temp_j = 0
        for j in range(0, CITY_NUMBERS, 1):
            if j != start:                  #ä¸è®¡ç®—è‡ªå·±ï¼ˆè™½ç„¶å¯èƒ½å½±å“ä¸å¤§
                if temp_distance > arr_distance[start][j]:
                    temp_j = j
                    temp_distance = arr_distance[start][j]

        total_distance += temp_distance
        passed.append(temp_j)

        start = temp_j

    return total_distance


def init():
    # ä¸€åˆ‡éƒ½æ‰åˆšåˆšå¼€å§‹~
    for i in range(0, ANT_NUMBERS, 1):
        arr_ant.append(Ant(i))              #èš‚èšæ•°ç»„çš„åˆå§‹åŒ–

    calculate_distance()                                #è·ç¦»æ•°ç»„çš„åˆå§‹åŒ–
    shortest_length = calculate_shortest_length()       #åˆå§‹çš„ä¿¡æ¯ç´ éƒ½ä¸€æ ·
    initial_pheromone = ANT_NUMBERS / shortest_length
    for i in range(0, CITY_NUMBERS, 1):
        for j in range(0, CITY_NUMBERS, 1):
            if i == j:
                pass
            else:
                arr_pheromone[i][j] = initial_pheromone

    """
    ALPHA = 
    BETA = 
    """
    pass


if __name__ == "__main__":
    x = [1304, 3639, 4177, 3712, 3488, 3326, 3238, 4196, 4312, 4386, 3007, 2562, 2788, 2381, 1332, 3715, 3918, 4061,
         3780, 3676, 4029, 4263, 3429, 3507, 3394, 3439, 2935, 3140, 2545, 2778, 2370]

    y = [2312, 1315, 2244, 1399, 1535, 1556, 1229, 1004, 790, 570, 1970, 1756, 1491, 1676, 695, 1678, 2179, 2370, 2212,
         2578, 2838, 2931, 1908, 2367, 2643, 3201, 3240, 3550, 2357, 2826, 2975]


    arr_pheromone = [[0 for i in range(0, CITY_NUMBERS, 1)] for j in range(0, CITY_NUMBERS, 1)]
    arr_distance = [[0 for i in range(0, CITY_NUMBERS, 1)] for j in range(0, CITY_NUMBERS, 1)]
    #arr_city_visited = [[] for i in range(0, ANT_NUMBERS, 1)]
    arr_ant = []


    init()
    arr_shortest_length = []
    arr_avg_length = []
    shortest_length = 0
    for i in range(0, ITERATION_NUMBERS, 1):
        shortest_length = 0
        total_length = 0
        temp_length = 100000000000
        for ant in arr_ant:
            ant.do_circle()
            print(ant.path)
            if temp_length > ant.distance:
                temp_length = ant.distance
            total_length += ant.distance

        shortest_length += temp_length
        update_pheromone(arr_ant)
        arr_shortest_length.append(shortest_length)
        arr_avg_length.append(total_length / ANT_NUMBERS)
        for ant in arr_ant:
            ant.reset()

    np_array1 = np.array(arr_shortest_length)
    np_array2 = np.array(arr_avg_length)
    #plt.plot([1], 1.11111111)      #æŠ¥é”™??????????/
    #plt.plot([1], np.array([1]))
    plt.subplot(2, 2, 1)
    plt.plot([i for i in range(1, ITERATION_NUMBERS + 1, 1)], np_array1)
    plt.title("shortest length")
    plt.xlabel("Iteration times")
    plt.ylabel("Length /m")

    plt.subplot(2, 2, 2)
    plt.plot([i for i in range(1, ITERATION_NUMBERS + 1, 1)], np_array2)
    plt.title("average length")
    plt.xlabel("Iteration times")
    plt.ylabel("Length /m")

    # plt.subplot(2, 2, 1)
    # x = np.array([i for i in range(1, ITERATION_NUMBERS + 1, 1)])
    # y = np.array(arr_shortest_length)
    # model = make_interp_spline(x, y)
    # xs = np.linspace(1, ITERATION_NUMBERS + 1, 500)
    # ys = model(xs)
    # plt.plot(xs, ys)
    # plt.title("Smooth")
    # plt.xlabel("X")
    # plt.ylabel("Y")

    plt.subplot(2, 2, 3)      #è¶‹åŠ¿å›¾
    x = np.array([i for i in range(1, ITERATION_NUMBERS + 1, 1)])
    y = np.array(arr_shortest_length)
    mpl.pylab.plot(x, y, 'ko')
    parameter = np.polyfit(x, y, 2)
    f = np.poly1d(parameter)
    mpl.pylab.plot(x, f(x), "r--")
    plt.xlabel("Ieration times")
    plt.ylabel("Length /m")
    plt.title("Smooth average length")

    plt.subplot(2, 2, 4)  # è¶‹åŠ¿å›¾
    x = np.array([i for i in range(1, ITERATION_NUMBERS + 1, 1)])
    y = np.array(arr_avg_length)
    mpl.pylab.plot(x, y, 'ko')
    parameter = np.polyfit(x, y, 2)
    f = np.poly1d(parameter)
    mpl.pylab.plot(x, f(x), "r--")
    plt.xlabel("Ieration times")
    plt.ylabel("Length /m")
    plt.title("Smooth average length")


    plt.suptitle("ANT ALGORITHM")
    plt.show()


    print(np_array1)
```



## å®éªŒç»“æœ

![image-20211116114040403](/images/èšç¾¤ç®—æ³•1.png)



![image-20211116114055180](/iamges/èšç¾¤ç®—æ³•.png)



## æ€»ç»“

â€‹		é€šè¿‡è¿™æ¬¡å®éªŒï¼Œ ä½¿æˆ‘å¯¹èšç¾¤ç®—æ³•æœ‰äº†ä¸€ä¸ªç®€å•çš„äº†è§£ï¼Œå¹¶ä¸”å¯¹ä¿¡æ¯ç´ æ›´æ–°æ¨¡å‹ã€å‚æ•°è®¾ç½®ç­‰é—®é¢˜æœ‰äº†æ›´åŠ æ·±å…¥çš„äº†è§£ï¼Œæ”¶è·é¢‡ä¸°ã€‚